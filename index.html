<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Markup2Pages.js by osobrevilla</title>
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <style type="text/css">
      /* FOR DEMO PAGE (ignore) */
      html, body { height: 100%; width: 100%; padding: 0; margin: 0; background: #CCC; font: 100%/1.5 Arial; }
      article { float: left; height: 100%; padding: 1em; box-sizing:border-box; width: 300px; font-size: 80%; text-shadow: 0 1px rgba(255,255,255,.7); color: #333; }
      #target { padding: 1em; background: #EEE; box-sizing:border-box; margin-left: 320px; height: 100%; overflow: hidden; overflow-y:scroll; }

      /* FOR APP */
      .page { font-family: Georgia; text-align: justify; font-size: 14px;  background: #FFF; line-height: 1.3; box-shadow: 0 1px 2px #CCC; padding:1em;  margin: 0 auto 1em; overflow: hidden; }
      .page  img { margin: .5em; }
      
    </style>
    <script type="text/javascript" src="src/Markup2Pages.js"></script>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function (res){

            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'src/data.html', true);
            xhr.addEventListener('readystatechange', function(res){
                
                 if (xhr.readyState == 4 && xhr.status == 200) {

                    new Markup2Pages(xhr.responseText, {
                        height: 480,
                        width: 350,
                        pageClass: 'page'
                    }).generate(function(pages){
                        // Paint Pages
                        console.log(pages);
                        var frag = document.createDocumentFragment(),
                            target = document.getElementById('target'),
                            i;
                        for ( i in pages ) {
                            pages[i].className = 'page';
                            frag.appendChild(pages[i]);
                        }
                            
                        target.appendChild(frag);

                        for ( i in pages ) {
                            pages[i].setAttribute("data-height", pages[i].clientHeight);
                        }
                    });
                 }
                
            });

            xhr.send();
        });
    </script>
  </head>
  <body>
  
     <article class="content">
      <header>
          <h1>Markup2Pages.js (beta)</h1>
          <p>Split html code to pages with maximum size.</p>
          <p>This project is maintained by <a href="https://github.com/osobrevilla">osobrevilla</a></p>
      </header>
      <section>
        <h1>Downloads</h1>
        <ul>
          <li class="download"><a class="buttons" href="https://github.com/osobrevilla/Markup2Pages.js/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/osobrevilla/Markup2Pages.js/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/osobrevilla/Markup2Pages.js">View On GitHub</a></li>
        </ul>
      </section>          
    </article>
    <div id="target"></div>
      
  </body>
</html>